{
	"info": {
		"_postman_id": "4e2115d6-d699-48a2-87fb-f1d174b1c10c",
		"name": "Wallet - e2e",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26036736"
	},
	"item": [
		{
			"name": "Happy Case",
			"item": [
				{
					"name": "Enroll Instrument",
					"item": [
						{
							"name": "Generate Token IO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Token', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "",
										"type": "default"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode=GMMMRA79L13H703E",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"bpd",
										"pagopa",
										"api",
										"v1",
										"login"
									],
									"query": [
										{
											"key": "fiscalCode",
											"value": "GMMMRA79L13H703E"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get initiative ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Initiative ID', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"onboarding",
										"service",
										"{{serviceId - initiative with criteria}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Enroll Instrument",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/{{idwallet}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"instruments",
										"{{idwallet}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Status Ok",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Get Detail\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Wallet status test\", function () {\r",
											"    let responseJson = pm.response.json()\r",
											"    pm.expect(responseJson.status).to.be.oneOf(['REFUNDABLE','NOT_REFUNDABLE_ONLY_INSTRUMENT']);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "{{Ocp-Apim-Trace}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"status"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Detail",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Get Detail\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "{{Ocp-Apim-Trace}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Hpan List",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(()=>{Â \r",
											"\r",
											"pm.test(\"Istrument status test\", function () {\r",
											"    let responseJson = pm.response.json()\r",
											"    pm.expect(responseJson.instrumentList[0].status).to.eql('ACTIVE');\r",
											"});\r",
											" },2000)"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"instruments"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "ISSUER Enroll Instrument",
					"item": [
						{
							"name": "Enroll Instrument",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PUT",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{issuerSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									},
									{
										"key": "Accept-Language",
										"value": "it_IT",
										"type": "text"
									},
									{
										"key": "Fiscal-Code",
										"value": "{{CF_GAM}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"brand\": \"VISA\",\r\n    \"type\": \"DEB\",\r\n    \"pgpPan\": \"-----BEGIN PGP MESSAGE-----\\n\\nwYwDxJQrySYbEVIBBADDylA+3Tt5l/9qTaadODb+b6TgUsnm2uCY9CzNVQHmnZBR\\ncGJkAkUnHRSTWl0P3LJAriRCGGMnZIGMFUa20YO6TeajhpDrYVxxm8unXwpizo80\\nSdQ2WngLX8w1laF/C7UYq0r02W6sidVMAQGyyptXBsUJnSrdC4EFyB3gk4sUUdJF\\nAcuorn410ApOyamiHPrZfoYV5iSVG/TMDI5FkVg8wW9SKzvmDGpREKIaYTkTOUzV\\nEuBG4gdAZjRB1gxsJwi5Dp5MMXXW\\n=nAa2\\n-----END PGP MESSAGE-----\\n\",\r\n    \"expireMonth\": \"08\",\r\n    \"expireYear\": \"2023\",\r\n    \"issuerAbiCode\": \"03069\",\r\n    \"holder\": \"TEST\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"hb",
										"wallet",
										"{{initiativeId-issuer}}",
										"instruments"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Detail",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{issuerSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									},
									{
										"key": "Accept-Language",
										"value": "it_IT",
										"type": "text"
									},
									{
										"key": "Fiscal-Code",
										"value": "GMMMRA79L13H703E",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"hb",
										"wallet",
										"{{initiativeId-issuer}}",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Wallet status test\", function () {\r",
											"    let responseJson = pm.response.json()\r",
											"    pm.expect(responseJson.status).to.be.eql('NOT_REFUNDABLE_ONLY_INSTRUMENT');\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{issuerSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									},
									{
										"key": "Accept-Language",
										"value": "it_IT",
										"type": "text"
									},
									{
										"key": "Fiscal-Code",
										"value": "GMMMRA79L13H703E",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/status",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"hb",
										"wallet",
										"{{initiativeId-issuer}}",
										"status"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get List PI associated to initiative",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{issuerSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									},
									{
										"key": "Accept-Language",
										"value": "it_IT",
										"type": "text"
									},
									{
										"key": "Fiscal-Code",
										"value": "GMMMRA79L13H703E",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"hb",
										"wallet",
										"{{initiativeId-issuer}}",
										"instruments"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Hpan List",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"setTimeout(()=>{Â \r",
											"\r",
											"pm.test(\"Istrument status test\", function () {\r",
											"    let responseJson = pm.response.json()\r",
											"    pm.expect(responseJson.instrumentList[0].status).to.eql('ACTIVE');\r",
											"});\r",
											" },2000)"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-issuer}}/instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId-issuer}}",
										"instruments"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Enroll Iban",
					"item": [
						{
							"name": "Generate Token IO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Token', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "",
										"type": "default"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"bpd",
										"pagopa",
										"api",
										"v1",
										"login"
									],
									"query": [
										{
											"key": "fiscalCode",
											"value": "{{CF_GAM}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get initiative ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Initiative ID', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"onboarding",
										"service",
										"{{serviceId - initiative with criteria}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Enroll Iban",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"iban\": \"IT09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"iban"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Status Ok",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Get Detail\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Wallet status test\", function () {\r",
											"    let responseJson = pm.response.json()\r",
											"    pm.expect(responseJson.status).to.be.oneOf(['REFUNDABLE','REFUNDABLE_ONLY_INSTRUMENT']);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "{{Ocp-Apim-Trace}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"status"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Wallet Detail",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Get Detail\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"iban\", pm.response.json().iban);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "{{Ocp-Apim-Trace}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Iban List",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/iban/{{iban}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"iban",
										"{{iban}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete instrument",
					"item": [
						{
							"name": "Generate Token IO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Token', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "",
										"type": "default"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"bpd",
										"pagopa",
										"api",
										"v1",
										"login"
									],
									"query": [
										{
											"key": "fiscalCode",
											"value": "{{CF_GAM}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get initiative ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Initiative ID', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"onboarding",
										"service",
										"{{serviceId - initiative with criteria}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get initiative List",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Initiative ID', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    const response = pm.response.json().instrumentList;\r",
											"    const filterByWalletId = response.filter(idWallet => idWallet.idWallet === pm.collectionVariables.get(\"idwallet\"));\r",
											"    console.log(filterByWalletId);\r",
											"    pm.collectionVariables.set(\"instrumentId\", filterByWalletId[0].instrumentId);\r",
											"});\r",
											"\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"instruments"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Instrument - Ok",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/{{instrumentId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"instruments",
										"{{instrumentId}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Unsubscribe Wallet & User",
					"item": [
						{
							"name": "Generate Token IO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Token', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "",
										"type": "default"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"bpd",
										"pagopa",
										"api",
										"v1",
										"login"
									],
									"query": [
										{
											"key": "fiscalCode",
											"value": "{{CF_IUR}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get initiative ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Initiative ID', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"onboarding",
										"service",
										"{{serviceId - initiative with criteria}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Unsubscribe - Ok",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "{{apimSubscriptionKey}}",
										"type": "text"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/unsubscribe",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"{{initiativeId}}",
										"unsubscribe"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get Hpan",
					"item": [
						{
							"name": "Get Hpan List OK - 200",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Hpan List",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Get Hpan List - initiativeId not found - 200",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Hpan List",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Empty test\", function () {\r",
													"    let jsonResponse = pm.response.json()\r",
													"    pm.expect(jsonResponse.instrumentList.length).equals(0);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/ndfjshuedv/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"ndfjshuedv",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Get Hpan List - initiativeId in draft - 200",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Hpan List",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Empty test\", function () {\r",
													"    let jsonResponse = pm.response.json()\r",
													"    pm.expect(jsonResponse.instrumentList.length).equals(0);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Get Hpan List - user not active - 200",
							"item": [
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - PI already used}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - PI already used}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Hpan List",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"    let jsonResponse = pm.response.json()\r",
													"    pm.expect(jsonResponse.instrumentList.length).equals(0);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Get Hpan List - initiative onboarding ended - 200",
							"item": [
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - endDate}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - endDate}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Hpan List",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"    let jsonResponse = pm.response.json()\r",
													"    pm.expect(jsonResponse.instrumentList.length).equals(0);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				}
			]
		},
		{
			"name": "Unhappy Case",
			"item": [
				{
					"name": "Payment Instrument",
					"item": [
						{
							"name": "Enroll Unsubscribed User - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('You are unsubscribed at this initiative!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"hpan\": \"e556e291aa16641ac4475bae437429475f61298244f6d2bd1c259a08958b82eb\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/120753",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments",
												"120753"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.equals('UNSUBSCRIBED');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll PI already in use - 404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - PI already used}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - PI already used}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('[404] during [PUT] to [http://idpay-payment-instrument-microservice-chart:8080/idpay/instrument/enroll] [PaymentInstrumentRestClient#enrollInstrument(InstrumentCallBodyDTO)]: [{\\\"code\\\":404,\\\"message\\\":\\\"The selected payment instrument is not active for such user and initiative.\\\"}]');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/94185",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments",
												"94185"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('NOT_REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll initiative not active for this User - 404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - self declaration}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - self declaration}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/120753",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments",
												"120753"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll initiative not active - 404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}/instruments/120753",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}",
												"instruments",
												"120753"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Instrument id wallet not found - 404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('[404] during [PUT] to [http://idpay-payment-instrument-microservice-chart:8080/idpay/instrument/enroll] [PaymentInstrumentRestClient#enrollInstrument(InstrumentCallBodyDTO)]: [{\\\"code\\\":404,\\\"message\\\":\\\"The selected payment instrument is not active for such user and initiative.\\\"}]');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/instruments/000000",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"instruments",
												"000000"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "ISSUER Enroll Instrument already in use - 403",
							"item": [
								{
									"name": "Enroll Instrument",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('[403] during [PUT] to [http://idpay-payment-instrument-microservice-chart:8080/idpay/instrument/hb/enroll] [PaymentInstrumentRestClient#enrollInstrumentIssuer(InstrumentIssuerCallDTO)]: [{\\\"code\\\":403,\\\"message\\\":\\\"Payment instrument already in use by another citizen\\\"}]');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{issuerSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											},
											{
												"key": "Accept-Language",
												"value": "it_IT",
												"type": "text"
											},
											{
												"key": "Fiscal-Code",
												"value": "{{CF_IUR}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"brand\": \"VISA\",\r\n    \"type\": \"DEB\",\r\n    \"pgpPan\": \"-----BEGIN PGP MESSAGE-----\\n\\nwYwDxJQrySYbEVIBBADDylA+3Tt5l/9qTaadODb+b6TgUsnm2uCY9CzNVQHmnZBR\\ncGJkAkUnHRSTWl0P3LJAriRCGGMnZIGMFUa20YO6TeajhpDrYVxxm8unXwpizo80\\nSdQ2WngLX8w1laF/C7UYq0r02W6sidVMAQGyyptXBsUJnSrdC4EFyB3gk4sUUdJF\\nAcuorn410ApOyamiHPrZfoYV5iSVG/TMDI5FkVg8wW9SKzvmDGpREKIaYTkTOUzV\\nEuBG4gdAZjRB1gxsJwi5Dp5MMXXW\\n=nAa2\\n-----END PGP MESSAGE-----\\n\",\r\n    \"expireMonth\": \"08\",\r\n    \"expireYear\": \"2023\",\r\n    \"issuerAbiCode\": \"03069\",\r\n    \"holder\": \"TEST\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"hb",
												"wallet",
												"{{initiativeId-issuer}}",
												"instruments"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{issuerSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											},
											{
												"key": "Accept-Language",
												"value": "it_IT",
												"type": "text"
											},
											{
												"key": "Fiscal-Code",
												"value": "{{CF_IUR}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"hb",
												"wallet",
												"{{initiativeId-issuer}}",
												""
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('NOT_REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{issuerSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											},
											{
												"key": "Accept-Language",
												"value": "it_IT",
												"type": "text"
											},
											{
												"key": "Fiscal-Code",
												"value": "{{CF_IUR}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"hb",
												"wallet",
												"{{initiativeId-issuer}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get List PI associated to initiative",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{issuerSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											},
											{
												"key": "Accept-Language",
												"value": "it_IT",
												"type": "text"
											},
											{
												"key": "Fiscal-Code",
												"value": "{{CF_IUR}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/hb/wallet/{{initiativeId-issuer}}/instruments",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"hb",
												"wallet",
												"{{initiativeId-issuer}}",
												"instruments"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Iban",
					"item": [
						{
							"name": "Enroll Iban Unsubscribed User - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('You are unsubscribed at this initiative!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"IT09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.equals('UNSUBSCRIBED');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.equals('UNSUBSCRIBED');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban initiative not active for this User - 404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_IUR}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_IUR}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - self declaration}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - self declaration}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban without upper case letters - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('Iban country code must contain upper case letters.');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban not italian - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('GB29NWBK60161331926819 Iban is not italian');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"GB29NWBK60161331926819\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban Wrong - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('[P3608105138205493205495] length is 23, expected BBAN length is: 18');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"GB09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban field empty - 400",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "{{CF_GAM}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get initiative ID",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Initiative ID', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"initiativeId\", pm.response.json().initiativeId);\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/onboarding/service/{{serviceId - initiative with criteria}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"onboarding",
												"service",
												"{{serviceId - initiative with criteria}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('[description]: The field is mandatory! - [iban]: The field is mandatory!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"\",\r\n    \"description\": \"\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status Ok",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"pm.test(\"Wallet status test\", function () {\r",
													"    let responseJson = pm.response.json()\r",
													"    pm.expect(responseJson.status).to.be.eql('REFUNDABLE');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId}}"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Enroll Iban initiative not active -404",
							"item": [
								{
									"name": "Generate Token IO",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('Retrieve Token', () => {\r",
													"    //verify response HTTP status \r",
													"    pm.response.to.have.status(200);\r",
													"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
													"});\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "POST",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "",
												"type": "default"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "default"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode=RLLCLD92M08A662O",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"bpd",
												"pagopa",
												"api",
												"v1",
												"login"
											],
											"query": [
												{
													"key": "fiscalCode",
													"value": "RLLCLD92M08A662O"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Enroll Iban",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Status test\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "true",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"iban\": \"IT09P3608105138205493205495\",\r\n    \"description\": \"conto cointestato\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}/iban",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}",
												"iban"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Status",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}/status",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}",
												"status"
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Wallet Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test(\"Get Detail\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"pm.test(\"Message test\", function () {\r",
													"    const responseJson = pm.response.json();\r",
													"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{tokenIO}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [
											{
												"key": "Ocp-Apim-Subscription-Key",
												"value": "{{apimSubscriptionKey}}",
												"type": "text"
											},
											{
												"key": "Ocp-Apim-Trace",
												"value": "{{Ocp-Apim-Trace}}",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/idpay/wallet/{{initiativeId-draft}}",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"idpay",
												"wallet",
												"{{initiativeId-draft}}"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Get Hpan List - initiativeId field empty - 404",
					"item": [
						{
							"name": "Generate Token IO",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test('Retrieve Token', () => {\r",
											"    //verify response HTTP status \r",
											"    pm.response.to.have.status(200);\r",
											"    pm.collectionVariables.set(\"tokenIO\", pm.response.text());\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Ocp-Apim-Subscription-Key",
										"value": "",
										"type": "default"
									},
									{
										"key": "Ocp-Apim-Trace",
										"value": "true",
										"type": "default"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/bpd/pagopa/api/v1/login?fiscalCode={{CF_GAM}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"bpd",
										"pagopa",
										"api",
										"v1",
										"login"
									],
									"query": [
										{
											"key": "fiscalCode",
											"value": "{{CF_GAM}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Hpan List",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status test\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Message test\", function () {\r",
											"    const responseJson = pm.response.json();\r",
											"    pm.expect(responseJson.message).to.eql('The requested initiative is not active for the current user!');\r",
											"});\r",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{tokenIO}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/idpay/wallet//instruments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"idpay",
										"wallet",
										"",
										"instruments"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "tokenIO",
			"value": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJSTExDTEQ5Mk0wOEE2NjJPIiwiaWF0IjoxNjc3NTg1NTIxLCJleHAiOjE2Nzc1ODkxMjF9.OpNGD0kDnbYGP810h83d2XjBlRpfqtQKjoafEekbO1o"
		},
		{
			"key": "serviceId - initiative with criteria",
			"value": "MOCKdevX21DC1KCY68H15SHEQZEMAZAOK"
		},
		{
			"key": "initiativeId",
			"value": ""
		},
		{
			"key": "instrumentId",
			"value": "63fcc85e75ab5763c93c60b9"
		},
		{
			"key": "initiativeId-draft",
			"value": "63fc8961fea3f35a5644e72e"
		},
		{
			"key": "serviceId - self declaration",
			"value": "MOCKdevWI962QGAVKET21OPP0XYXXUYTL"
		},
		{
			"key": "serviceId - PI already used",
			"value": "MOCKdev6UHLVU5PYA9GS0UJQAUZN7RH4I"
		},
		{
			"key": "initiativeId-issuer",
			"value": "63fded4ffea3f35a5644e738"
		},
		{
			"key": "initiativeId-unsubscribed-issuer",
			"value": "63fe0fc2fea3f35a5644e739"
		},
		{
			"key": "serviceId - endDate",
			"value": "MOCKdevRT7SSUXXTV4DEAZE2NWR8LF4EW"
		},
		{
			"key": "serviceId - instrument-failed",
			"value": "MOCKdevVTDS9QUN1BWFWPIZGA090RE2IC"
		},
		{
			"key": "CF_IUR",
			"value": "RLLCLD92M08A662O"
		},
		{
			"key": "CF_GAM",
			"value": "GMMMRA79L13H703E"
		},
		{
			"key": "iban",
			"value": ""
		},
		{
			"key": "idwallet",
			"value": "94185"
		}
	]
}